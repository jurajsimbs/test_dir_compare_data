{"remainingRequest":"C:\\work\\bi-admin-vue-new\\node_modules\\thread-loader\\dist\\cjs.js!C:\\work\\bi-admin-vue-new\\node_modules\\babel-loader\\lib\\index.js!C:\\work\\bi-admin-vue-new\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\work\\bi-admin-vue-new\\src\\components\\editor\\ace\\index.js","dependencies":[{"path":"C:\\work\\bi-admin-vue-new\\src\\components\\editor\\ace\\index.js","mtime":1552773330965},{"path":"C:\\work\\bi-admin-vue-new\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\work\\bi-admin-vue-new\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\work\\bi-admin-vue-new\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\work\\bi-admin-vue-new\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["var ace = require('brace');\n\nmodule.exports = {\n  render: function render(h) {\n    var height = this.height ? this.px(this.height) : '100%';\n    var width = this.width ? this.px(this.width) : '100%';\n    return h('div', {\n      attrs: {\n        style: \"height: \" + height + '; width: ' + width\n      }\n    });\n  },\n  props: {\n    value: {\n      type: String,\n      required: true\n    },\n    lang: String,\n    theme: String,\n    height: true,\n    width: true,\n    options: Object\n  },\n  data: function data() {\n    return {\n      editor: null,\n      contentBackup: \"\"\n    };\n  },\n  methods: {\n    px: function px(n) {\n      if (/^\\d*$/.test(n)) {\n        return n + \"px\";\n      }\n\n      return n;\n    }\n  },\n  watch: {\n    value: function value(val) {\n      if (this.contentBackup !== val) {\n        this.editor.setValue(val, 1);\n        this.contentBackup = val;\n      }\n    },\n    theme: function theme(newTheme) {\n      this.editor.setTheme('ace/theme/' + newTheme);\n    },\n    lang: function lang(newLang) {\n      this.editor.getSession().setMode('ace/mode/' + newLang);\n    },\n    options: function options(newOption) {\n      this.editor.setOptions(newOption);\n    },\n    height: function height() {\n      this.$nextTick(function () {\n        this.editor.resize();\n      });\n    },\n    width: function width() {\n      this.$nextTick(function () {\n        this.editor.resize();\n      });\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    console.log('ace-mnt!');\n    this.editor.destroy();\n    this.editor.container.remove();\n  },\n  mounted: function mounted() {\n    var vm = this;\n    var lang = this.lang || 'text';\n    var theme = this.theme || 'chrome';\n\n    require('brace/ext/emmet');\n\n    var editor = vm.editor = ace.edit(this.$el);\n    this.$emit('init', editor);\n    editor.$blockScrolling = Infinity;\n    editor.setOption(\"enableEmmet\", true);\n    editor.getSession().setMode('ace/mode/' + lang);\n    editor.setTheme('ace/theme/' + theme);\n    editor.setValue(this.value, 1);\n    this.contentBackup = this.value;\n    editor.on('change', function () {\n      var content = editor.getValue();\n      vm.$emit('input', content);\n      vm.contentBackup = content;\n    });\n    if (vm.options) editor.setOptions(vm.options);\n  }\n};",{"version":3,"sources":["C:\\work\\bi-admin-vue-new\\src\\components\\editor\\ace\\index.js"],"names":["ace","require","module","exports","render","h","height","px","width","attrs","style","props","value","type","String","required","lang","theme","options","Object","data","editor","contentBackup","methods","n","test","watch","val","setValue","newTheme","setTheme","newLang","getSession","setMode","newOption","setOptions","$nextTick","resize","beforeDestroy","console","log","destroy","container","remove","mounted","vm","edit","$el","$emit","$blockScrolling","Infinity","setOption","on","content","getValue"],"mappings":"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","sourcesContent":["const ace = require('brace');\r\n\r\nmodule.exports = {\r\n    render: function (h) {\r\n        var height = this.height ? this.px(this.height) : '100%';\r\n        var width = this.width ? this.px(this.width) : '100%';\r\n        return h('div',{\r\n            attrs: {\r\n                style: \"height: \" + height  + '; width: ' + width,\r\n            }\r\n        })\r\n    },\r\n    props:{\r\n        value:{\r\n            type:String,\r\n            required:true\r\n        },\r\n        lang:String,\r\n        theme:String,\r\n        height:true,\r\n        width:true,\r\n        options:Object\r\n    },\r\n    data: function () {\r\n        return {\r\n            editor:null,\r\n            contentBackup:\"\"\r\n        }\r\n    },\r\n    methods: {\r\n        px:function (n) {\r\n            if( /^\\d*$/.test(n) ){\r\n                return n+\"px\";\r\n            }\r\n            return n;\r\n        }\r\n    },\r\n    watch:{\r\n        value:function (val) {\r\n            if(this.contentBackup !== val){\r\n                this.editor.setValue(val,1);\r\n                this.contentBackup = val;\r\n            }\r\n        },\r\n        theme:function (newTheme) {\r\n            this.editor.setTheme('ace/theme/'+newTheme);\r\n        },\r\n        lang:function (newLang) {\r\n            this.editor.getSession().setMode('ace/mode/'+newLang);\r\n        },\r\n        options:function(newOption){\r\n            this.editor.setOptions(newOption);\r\n        },\r\n        height:function(){\r\n            this.$nextTick(function(){\r\n                this.editor.resize()\r\n            })\r\n        },\r\n        width:function(){\r\n            this.$nextTick(function(){\r\n                this.editor.resize()\r\n            })\r\n        }\r\n    },\r\n    beforeDestroy: function() {\r\n        console.log('ace-mnt!');\r\n        this.editor.destroy();\r\n        this.editor.container.remove();\r\n    },\r\n    mounted: function () {\r\n        var vm = this;\r\n        var lang = this.lang||'text';\r\n        var theme = this.theme||'chrome';\r\n\r\n        require('brace/ext/emmet');\r\n\r\n        var editor = vm.editor = ace.edit(this.$el);\r\n\r\n        this.$emit('init',editor);\r\n\r\n        editor.$blockScrolling = Infinity;\r\n        editor.setOption(\"enableEmmet\", true);\r\n        editor.getSession().setMode('ace/mode/'+lang);\r\n        editor.setTheme('ace/theme/'+theme);\r\n        editor.setValue(this.value,1);\r\n        this.contentBackup = this.value;\r\n\r\n        editor.on('change',function () {\r\n            var content = editor.getValue();\r\n            vm.$emit('input',content);\r\n            vm.contentBackup = content;\r\n        });\r\n        if(vm.options)\r\n            editor.setOptions(vm.options);\r\n    }\r\n}\r\n"]}]}